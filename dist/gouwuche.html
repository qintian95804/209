<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/gouwuche.css">
    <link rel="stylesheet" href="css/jingdong.css">
</head>
<body>
    <div class="wrap">
        <ul class="nav">
            <a href="#">
                <span class="glyphicon glyphicon-map-marker"></span>
                <span>河南</span>
            </a>
            <div class="diqu">
                <li>
                    <span>北京</span>
                    <span>上海</span>
                    <span>天津</span>
                    <span>重庆</span>
                    <span>河北</span>
                </li>
                <li>
                    <span>山西</span>
                    <span>河南</span>
                    <span>辽宁</span>
                    <span>吉林</span>
                    <span>黑龙江</span>
                </li>
                <li>
                    <span>内蒙古</span>
                    <span>江苏</span>
                    <span>山东</span>
                    <span>安徽</span>
                    <span>浙江</span>
                </li>
                <li>
                    <span>福建</span>
                    <span>湖北</span>
                    <span>湖南</span>
                    <span>广东</span>
                    <span>广西</span>
                </li>
                <li>
                    <span>江西</span>
                    <span>四川</span>
                    <span>海南</span>
                    <span>贵州</span>
                    <span>云南</span>
                </li>
                <li>
                    <span>西藏</span>
                    <span>陕西</span>
                    <span>甘肃</span>
                    <span>青岛</span>
                    <span>宁夏</span>
                </li>
                <li>
                    <span>新疆</span>
                    <span>港澳</span>
                    <span>台湾</span>
                    <span>钓鱼岛</span>
                    <span>海外</span>
                </li>
                <div class="xiahuaxian1"></div>
                <div class="b">地区专享版本</div>
                <p>中国港澳</p>
                <p>中国台湾</p>
                <p>京东全球</p>
                <div class="xiahuaxian1"></div>
                <div class="b">Available Sites</div>
                <p><i></i>Global Site</p>
                <p><i></i>CaNT PoccNN</p>
                <p><i></i>Situs Indonesia</p>
                <p><i></i>Sitio de Espana</p>
                <p><i></i>niao yu kan bu dong</p>
            </div>
        </ul>
        <ul class="nav1">
            <li><a class="yonghu1" href="#"></a><a class="yonghu" href="http://localhost:8080/denglu.html">你好，请登陆</a>&nbsp; &nbsp;<a class="zhu1" href="http://localhost:8080/jingdong.html"></a><a class="zhu" href="http://localhost:8080/zhuce.html">免费注册</a></a></li>
            <li></li>
            <li><a href="#">我的订单</a></li>
            <li></li>
            <li><a href="#">我的京东</a><span class="glyphicon glyphicon-menu-down"></span>
                <ul class="wodejingdong">
                    <li><span>待处理订单</span><span>消息</span></li>
                    <li><span>返修退换货</span><span>我的问答</span></li>
                    <li><span>降价商品</span><span>我的关注</span></li>
                    <li></li>
                    <li><span>我的京豆</span><span>我的优惠券</span></li>
                    <li><span>我的白条</span><span>我的理财</span></li>
                </ul>
            </li>
            <li></li>
            <li><a href="#">京东会员</a></li>
            <li></li>
            <li><a href="#">企业采购</a><span class="glyphicon glyphicon-menu-down"></span>
                <ul class="qiyecaigou">
                    <li><span>企业购</span><span>商用场景馆</span></li>
                    <li><span>工业品</span><span>丰客多商城</span></li>
                    <li><span>礼品卡</span><span>微信企业购</span></li>
                </ul>
            </li>
            <li></li>
            <li><a href="#">客户服务</a><span class="glyphicon glyphicon-menu-down"></span>
                <ul class="kehufuwu">
                    <div>客户</div>
                    <li><span>帮助中心</span><span>售后服务</span></li>
                    <li><span>在线客服</span><span>意见建议</span></li>
                    <li><span>电话客服</span><span>客服邮箱</span></li>
                    <li><span>金融咨询</span><span>全球售客服</span></li>
                    <li><span>企业客服</span></li>
                    <div>商户</div>
                    <li><span>合作招商</span><span>成长中心</span></li>
                    <li><span>商家后台</span><span>京麦工作台</span></li>
                    <li><span>商家帮助</span><span>规则平台</span></li>
                </ul>
            </li>
            <li></li>
            <li><a href="#">网站导航</a><span class="glyphicon glyphicon-menu-down"></span>
                <div class="wangzhannav">
                    <ul class="daohang1">
                        <h6>特色主题</h6>
                        <li><span>新品首发</span><span>京东金融</span><span>全球首</span><span>国际站</span></li>
                        <li><span>京东会员</span><span>京东预售</span><span>台湾售</span><span>俄语站</span></li>
                        <li><span>装机大师</span><span>0元评测</span><span>港澳售</span><span>优惠券</span></li>
                        <li><span>秒杀</span><span>闪购</span><span>印尼站</span><span>陪伴计划</span></li>
                        <li><span>出海招商</span><span>拍拍二手</span><span>买什么</span></li>
                    </ul>
                    <ul class="daohang2">
                        <h6>行业频道</h6>
                        <li><span>手机</span><span>智能数码</span><span>玩3C</span></li>
                        <li><span>电脑办公</span><span>家用电器</span><span>京鱼座智能</span></li>
                        <li><span>京东服饰</span><span>京东生鲜</span><span>家装城</span></li>
                        <li><span>母婴</span><span>食品</span><span>农资频道</span></li>
                        <li><span>整车</span><span>图书</span><span>劳动防护</span></li>
                    </ul>
                    <ul class="daohang3">
                        <h6>生活服务</h6>
                        <li><span>京东众筹</span><span>白条</span><span>京东金融App</span></li>
                        <li><span>京东小金库</span><span>理财</span><span>话费</span></li>
                        <li><span>水电煤</span><span>彩票</span><span>旅行</span></li>
                        <li><span>机票酒店</span><span>电影票</span><span>京东到家</span></li>
                        <li><span>游戏</span><span>拍拍回收</span></li>
                    </ul>
                    <ul class="daohang4">
                        <h6>生活服务</h6>
                        <li><span>合作招商</span><span>京东通信</span><span>京东E卡</span></li>
                        <li><span>企业采购</span><span>服务市场</span><span>办公生活馆</span></li>
                        <li><span>校园加盟</span><span>京东社区</span><span>游戏社区</span></li>
                        <li><span>机票酒店</span><span>电影票</span><span>京东到家</span></li>
                        <li><span>知识产权维权</span></li>
                    </ul>
                </div>
            </li>
            <li></li>
            <li><a href="#">手机京东</a></li>
        </ul>
    </div>
    <div class="logoys">
        <div class="logo">
            <a href="http://localhost:8080/jingdong.html"><img src="img/101.png"></a>
            <span>购物车</span>
            <div class="sousuo1">
                <input class="sou" type="text">
                <button class="btn">搜索</button>
            </div>
        </div>
    </div>
    <div class="lieys">
        <div class="lie">
            <h3><span>全部商品</span><div><span>配送至：</span><p>河南高新区威科姆科技园D座4楼</p></div></h3>
            <h2>
                <input class="g" type="checkbox">
                <span class="q">全选</span>
                <span class="s">商品</span>
                <span class="d">单价</span>
                <span class="sl">数量</span>
                <span class="x">小计</span>
                <span class="c">操作</span>
            </h2>
            <div class="nav101"></div>
            <div class="nav102">总价:<span class="zongjia"></span><button>去结算</button></div>
        </div>
    </div>
    <script src="js/jquery.js"></script>
    <script>
        $(function(){
            let a=JSON.parse(localStorage.getItem("daraID"));
            $.get("http://jx.xuzhixiang.top/ap/api/cart-list.php",{
                id:a,
            },data=>{
                str = "";
                for(let i =0;i < data.data.length;i++){
                    str+=`
                    <div class="moban" data-id="${data.data[i].pid}">
                    <input class="xg" type="checkbox">
                    <img src="img/${data.data[i].pimg}">
                    <p>${data.data[i].pname}<br>${data.data[i].pdesc}</p>
                    <span>￥<span class="dan">${data.data[i].pprice}</span></span>
                    <span class="shul"><span class="jian">-</span><input class="sl" type="text" class="ge" value="${data.data[i].pnum}"><span class="jia">+</span></span>
                    <span class="xiaoj">${data.data[i].pprice*data.data[i].pnum}</span>
                    <button class="shanchu">删除</button>
                    </div>
                    `
                }
                $(".nav101").append(str);
                $(".jian").click(function(){
                    let s = $(this).next().val();
                    s--;
                    if(s <= 1){
                        s=1;
                    }
                    $(this).next().val(s);
                    var price=Number($(this).parent().prev().text().substr(1,$(this).parent().prev().text().length-1));
                    xiaoji(s,price,$(this));
                    let id = $(this).parent().parent().attr("data-id");
                    $.get("http://jx.xuzhixiang.top/ap/api/cart-update-num.php",{
                        uid:a,
                        pid:id,
                        pnum:s
                    })
                })
                    $(".jia").click(function(){
                        let s = $(this).prev().val();
                        s++;
                        $(this).prev().val(s);
                        var price=Number($(this).parent().prev().text().substr(1,$(this).parent().prev().text().length-1));
                        xiaoji(s,price,$(this))
                        let id = $(this).parent().parent().attr("data-id");
                        $.get("http://jx.xuzhixiang.top/ap/api/cart-update-num.php",{
                            uid:a,
                            pid:id,
                            pnum:s
                        })
                    })
                    $(".shanchu").click(function(){
                    let pid = $(this).parent().attr("data-id");
                    let d=JSON.parse(localStorage.getItem("daraID"));
                    $.get("http://jx.xuzhixiang.top/ap/api/cart-delete.php",{
                        uid:d,
                        pid:pid
                    })
                    $(this).parent().remove();
                    zongjia();
                })
                $(".g").click(function(){
                    $(".xg").prop("checked",this.checked);
                    zongjia();
                })
                $(".xg").click(function(){
                    if($(".xg").length == $(".xg").filter(":checked").length){
                        $(".g").prop("checked",this.checked)
                    }else{
                        $(".g").prop("checked",false)
                    }
                    zongjia();
                })
                function xiaoji(num,price,dom){
                    var danjia=num*price;
                    dom.parent().next().text(danjia)
                    zongjia()
                }
                function zongjia(){
                    let sum = 0;
                    $(".xg").each(function(){
                        if(this.checked == true){
                            let i = $(this).siblings(".xiaoj").text();
                            sum += Number(i);
                        }
                    })
                    $(".zongjia").text(sum);
                }
            })
            if(a != undefined){
                $(".yonghu").css("display","none")
                $(".yonghu1").text(""+"你好: "+ a);
                $(".zhu1").text("注销");
                $(".zhu").css("display","none");
                $(".zhu1").click(function(){
                    $(".yonghu").css("display","block")
                    $(".zhu").css("display","block");
                    $(".yonghu1").css("display","none")
                    $(".zhu1").css("display","none");
                    localStorage.removeItem("usename");
                    localStorage.removeItem("daraID");
                    localStorage.removeItem("token");
                })
            }
        })
    </script>
</body>
</html>